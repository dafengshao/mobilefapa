function hasScrolled(){var t=$(this).scrollTop();Math.abs(lastScrollTop-t)<=delta||(t>lastScrollTop&&t>navbarHeight?$(".header").removeClass("nav-down").addClass("nav-hide"):t+$(window).height()<$(document).height()&&$(".header").removeClass("nav-hide").addClass("nav-down"),lastScrollTop=t)}function hasScrolled2(){var t=$(this).scrollTop();t>navbarHeight?$(".header").removeClass("nav-down").addClass("nav-hide"):t+$(window).height()<$(document).height()&&$(".header").removeClass("nav-hide").addClass("nav-down")}function commonAjax(t,e,a,i,n){i=i||"GET",e=e||{},a=a||function(){},n=n||function(){},$.ajax({url:""!=t?t:document.location.origin+"/ajax.php"+t,data:e,type:i,success:function(t,e,i){a(t)},error:function(t){n(t)}})}function showModal(t){$("#"+t).fadeIn()}function refresh_chat(){$("#chat").load("?mode=async&function=get_block&block_id=list_messages_messages_list"),$("#chat_friends").load("?mode=async&function=get_block&block_id=list_members_friend_list")}function get_sharing_html(t,e,a,i){t=encodeURIComponent(t),e=encodeURIComponent(e),a=encodeURIComponent(a),i=encodeURIComponent(i);var n='<ul class="share-buttons"><li><a href="https://www.facebook.com/sharer/sharer.php?u='+t+"&t="+e+"&picture="+i+"&description="+a+'" title="Share on Facebook" target="_blank"><img src="/images/flat_web_icon_set/inverted/Facebook.png"></a></li><li><a href="https://twitter.com/intent/tweet?source='+t+"&text="+e+":%20"+t+'" target="_blank" title="Tweet"><img src="/images/flat_web_icon_set/inverted/Twitter.png"></a></li><li><a href="http://www.tumblr.com/share?v=3&u='+t+"&t="+e+'&s=" target="_blank" title="Post to Tumblr"><img src="/images/flat_web_icon_set/inverted/Tumblr.png"></a></li><li><a href="http://www.stumbleupon.com/submit?url='+t+"&title="+e+'" target="_blank" title="Submit to Stumbleupon"><img src="/images/flat_web_icon_set/inverted/Stumbleupon.png"></a></li><li><a href="http://www.reddit.com/submit?url='+t+"&title="+e+'" target="_blank" title="Submit to Reddit"><img src="/images/flat_web_icon_set/inverted/Reddit.png"></a></li><li><a href="mailto:?subject='+e+"&body="+a+":%20"+t+'" target="_blank" title="Email"><img src="/images/flat_web_icon_set/inverted/Email.png"></a></li></ul>';return n}var didScroll,lastScrollTop=0,delta=20,navbarHeight=$(".ad_top").outerHeight();$(window).scroll(function(t){didScroll=!0});var gif_catalog=/\/gifs\//i.test(document.location.pathname);if(setInterval(function(){didScroll&&(gif_catalog?hasScrolled2():(hasScrolled(),didScroll=!1))},250),$(".quote").length>0&&$(".pagination[role]").length>0){var temp=$(".pagination[role]")[0].outerHTML;$(".pagination[role]").remove(),$(".quote").before(temp)}$(".menu_button .icon-list,#menu .background").on("click",function(t){return t.preventDefault(),$("#menu").is(":visible")?($(".wrapper").css({overflow:"visible",height:"auto"}),$("#menu").fadeOut(500).find(".menu").animate({right:"-200px"},500)):($(".wrapper").css({overflow:"hidden",height:$(window).height()}),$("#menu").fadeIn(500).find(".menu").animate({right:0},500)),!1}),$(".menu_profile,#menu2 .background").on("click",function(t){return t.preventDefault(),$("#menu2").is(":visible")?($(".wrapper").css({overflow:"visible",height:"auto"}),$("#menu2").fadeOut(500).find(".menu").animate({right:"-200px"},500)):($(".wrapper").css({overflow:"hidden",height:$(window).height()}),$("#menu2").fadeIn(500).find(".menu").animate({right:0},500)),!1}),$(".change_lang").on("click",function(){return $(this).hasClass("active")?($(this).removeClass("active"),$(".lang_formats,.lang_formats .sub-menu").hide()):($(this).addClass("active"),$(".lang_formats,.lang_formats .sub-menu").show()),!1}),$(".search_button").on("click",function(){$("#search").toggle().find("input").focus()}),$("#search").submit(function(){if(""==$(this).find("input[type=text]").val())return $("#search").hide(),!1});var last_valid_selection="";if($(".cat_checkbox").on("change",function(){$("#category_ids").val($(".cat_checkbox").val().join())}),$(".list-menu a").on("click",function(){if($(this).parent().find(".sub-menu").length>0)return $(this).parent().hasClass("active")?$(this).parent().removeClass("active").find(".sub-menu").slideUp():$(this).parent().addClass("active").find(".sub-menu").slideDown(),!1}),$(".pagination_form input").on("change",function(){if($(this).val()<=parseInt($(this).attr("max"))&&$(this).val()>=parseInt($(this).attr("min"))){var t=document.createElement("a");t.href=$(this).parent().attr("action");var e=t.pathname+$(this).val()+"/"+t.search+t.hash;document.location=e}else $(this).val(parseInt($(this).attr("max")));return!1}),$(".pagination_form").on("submit",function(){var t=$(this).find("input");if(t.val()<=parseInt(t.attr("max"))&&t.val()>=parseInt(t.attr("min"))){var e=document.createElement("a");e.href=$(this).attr("action");var a=e.pathname+(t.val()>1?t.val()+"/":"")+e.search+e.hash;document.location=a}else $(this).val(parseInt($(this).attr("max")));return!1}),$(document).on("click","[data-toggle-id]",function(t){t.preventDefault();var e=$(this);if(e.data("toggle-text")){var a=e.attr("data-toggle-text");e.attr("data-toggle-text",e.find(".toggle-text").text()),e.find(".toggle-text").text(a)}e.hasClass("active")?(e.removeClass("active"),$(e.data("toggle-id")).stop().slideUp(),e.data("toggle-next-id")?$(e.data("toggle-next-id")).slideDown():null):(e.addClass("active"),$(e.data("toggle-id")).stop().slideDown(),e.data("toggle-next-id")?$(e.data("toggle-next-id")).slideUp():null)}),$(document).on("change",".sort_select",function(t){t.preventDefault(),document.location.pathname!=$(this).val()&&""!=$(this).val()&&(document.location=$(this).val())}),$(".sort_select").length>0&&$(".sort_select [selected]").length<1&&$('.sort_select option[value="'+document.location.pathname.replace(/\/[0-9]+\//,"/")+'"]').prop("selected",!0),$("#related_videos").length>0){$("body").append('<div class="infinite-scroll-loader"> Loading... </div>');var infinite_loader=$(".infinite-scroll-loader");$("#related_videos").on("change",function(){var t="?"+$(this).val(),e=$("#"+$(this).find("option:selected").data("div-id"));$(".related-content > .content").hide(),e.show(),e.hasClass("not-loaded")&&commonAjax(t,{},function(t){e.removeClass("not-loaded").find(".content").html(t),e.find("li").size()<12&&e.find(".load-more-pagi").remove()},"post")}),$(".load-more-pagi").on("click",function(){if(!infinite_loader.is(":visible")){var t=$(this),e=t.parent(),a=$('[data-div-id="'+e.attr("id")+'"]').val(),i=parseInt(t.data("from"));infinite_loader.fadeIn(),commonAjax("?"+a+"&from="+i,{},function(a){e.find(".list_items").append($(a).find("li")),t.data("from",i+1),i>3&&t.remove(),infinite_loader.fadeOut()},"post",function(){t.remove(),infinite_loader.fadeOut()})}return!1})}if($("#send_to_playlist").on("click",function(){var t=$("#select_playlists").data("video-id"),e=$("#select_playlists").val();e?(commonAjax("?mode=async&action=add_to_favourites&video_id="+t+"&playlist_id="+e,{},function(t){$(t).find("success")?$("#send_to_playlist").addClass("success"):$("#send_to_playlist").addClass("error")}),$("#playlist_error").hide()):$("#playlist_error").show()}),$(document).on("click","[data-ajax]",function(t){var e=$(this);e.hasClass("clicked")||commonAjax(e.data("ajax"),{},function(t){$(t).find("success").length>0?e.addClass("success"):e.addClass("error"),e.data("multiple")||e.addClass("clicked")})}),"function"==typeof $.swipebox&&$(".swipebox").swipebox(),$(".watch-list").length>0){var initialSlide=0;$(".watch-list a").on("click",function(t){return t.preventDefault(),$(".watch-list li.active").removeClass("active"),$(this).parent().addClass("active"),$("#kt_player").load($(this).parent().data("video-url")+""),$("h1").find("span").remove(),$("h1").append('<span style="font-size:11px;"> <i class="icon-arrow-right"></i> '+$(this).attr("title")+"</span>"),$("#current_video").text($(this).parents("li").index()+1),document.location.hash=$(this).parent().data("video-id"),$("#current_url").val($("#current_playlist").val()+"#"+$(this).parent().data("video-id")),!1});var hash_id=document.location.hash.replace("#","");hash_id?$(".watch-list [data-video-id="+hash_id+"]").length>0?($(".watch-list [data-video-id="+hash_id+"] a").trigger("click"),initialSlide=$(".watch-list [data-video-id="+hash_id+"]").index()):$(".watch-list .owl-item:first-child a").trigger("click"):$(".watch-list li:first-child a").trigger("click"),$(".watch-list").slick({infinite:!1,initialSlide:initialSlide,slidesToShow:1,centerMode:!0,variableWidth:!0})}var $el,$ps,$up,totalHeight;if($(".description .read-more").click(function(){return totalHeight=0,$el=$(this),$p=$el.parent(),$ps=$p.find("p:not('.read-more')"),$ps.each(function(){totalHeight+=$(this).outerHeight()}),$p.css({height:$p.height(),"max-height":9999}).animate({height:totalHeight}),$el.fadeOut(),!1}),$("[data-comment-like],[data-comment-dislike]").on("click",function(){var t=$(this),e=t.data("comment-like")||t.data("comment-dislike"),a=t.data("comment-like")?1:-1;commonSendRequest("?"+commonGetAjaxParams(),"action=vote_comment&comment_id="+e+"&vote="+a,!1,function(e,i){e?a>0?t.parent().find(".green").text(parseInt(t.parent().find(".green").text())+1):t.parent().find(".red").text(parseInt(t.parent().find(".red").text())+1):t.parent().find("span.highlight").length<1&&(t.parent().prepend('<span class="highlight">You already voted</span>'),setTimeout(function(){t.parent().find("span.highlight").remove()},5e3))})}),$("[data-reveal-ajax]").length>0){var modalHtml='<div class="modal_wrapper"><span class="close_modal"><i class="icon-cross"></i></span><div class="content"></div></div><div class="modal_overlay"></div>';$(document).on("click","[data-reveal-ajax]",function(t){if(t.preventDefault(),$(this).data("div-id"))showModal($(this).data("div-id"));else{if(!/login\.php/.test($(this).data("reveal-ajax")))return!0;var e="modal"+Date.now();$("<div/>",{id:e,class:"modal",style:"display:none"}).appendTo("body"),commonAjax($(this).data("reveal-ajax"),{},function(t){$("#"+e).html(modalHtml),$("#"+e).find(".content").html(t),showModal(e)}),$(this).data("div-id",e)}return!1}),$(document).on("click",".close_modal,.modal_overlay",function(t){$(this).parents(".modal").fadeOut()})}$(".download_button").on("click",function(){$("#"+$(this).data("div-id")).find(".bottom").html('<iframe src="/b/under_player.html" width="300" height="100" frameborder="0" scrolling="no" allowtransparency="true" marginheight="0" marginwidth="0"></iframe>')}),$("#modal_download_formats a").on("click",function(){ga("send","event","Download",$(this).find("b").text())}),$(document).ready(function(){$("#modal_download_formats .button-group-vertical").append($("#modal_download_formats .button-group-vertical a:nth-child(2)"))});var iphone_version=navigator.userAgent.match(/Iphone OS ([0-9]+)/i);iphone_version&&iphone_version[1]>=11&&$("body").addClass("ios11"),$(".js-select-form[data-input=tags]").on("change",function(t){$("[name=tags]").val($(this).val().join(","))}),$(".js-select-form[data-input=category]").on("change",function(t){var e="",a=$(this).val();$.each(a,function(t,a){e+='<input type="hidden" name="category_ids[]" value="'+a+'"/>'}),$("#cat_ids").html(e)}),$(".js-select-form[data-input=model]").on("change",function(t){var e="",a=$(this).val();$.each(a,function(t,a){e+='<input type="hidden" name="model_ids[]" value="'+a+'"/>'}),$("#model_ids").html(e)}),$(".remove_from_favlist").on("click",function(t){t.preventDefault();var e=$(this),a={mode:"async",action:e.data("manage-action"),"delete[]":e.data("id"),video_id:e.data("id")};return e.data("manage-playlist_id")&&(a.playlist_id=e.data("manage-playlist_id")),e.data("manage-fav-type")&&(a.fav_type=e.data("manage-fav-type")),e.data("manage-block")&&(a.function="get_block",a.block_id=e.data("manage-block")),e.find(".icon-cross").hide(),e.find(".icon-spin").show(),e.data("manage-confirm")&&!confirm("Are you sure?")?(e.find(".icon-cross").show(),e.find(".icon-spin").hide(),!1):(commonAjax(e.data("manage-url")||document.location.href,a,function(t,a){$xml=$(t),$xml.find("success").length>0?e.parents(".item").addClass("removeitem").append('<div class="removed"><i class="icon-cross"></i></div>'):(e.parents("li").find(".status").html($xml.find("error").length>0?"forbidden"==$xml.find("error").attr("type")?"Sorry, you should contact website support.":"Something gone wrong. Try again later.":t).show(),setTimeout(function(){e.parents("li").find(".status").hide()},5e3)),e.find(".icon-cross").show(),e.find(".icon-spin").hide()},"post"),!1)}),$(".subscribers li").length>0&&($(".list_items").addClass("list_subscribe"),$(".subscribers li").each(function(){var t="",e=$(this).data("subscribe-value");if($(this).data("subscribe-user"))t="subscribe-user="+$(this).data("subscribe-user");else if($(this).data("subscribe-model")){var a=$(this).data("subscribe-model");t="subscribe-model0="+a;var i=", .list_items [data-subscribe-model1="+a+"], .list_items [data-subscribe-model2="+a+"], .list_items [data-subscribe-model3="+a+"]"}else $(this).data("subscribe-content-source")?t="subscribe-content-source="+$(this).data("subscribe-content-source"):$(this).data("subscribe-playlist")&&(t="subscribe-playlist="+$(this).data("subscribe-playlist"));var e=$(this).html();$(".list_items [data-"+t+"]"+("string"==typeof i?i:"")).append('<div class="meta subscribe_from">'+e+"</div>")})),$(document).on("click",".send_chat",function(t){var e=$(this).parents(".chat-input"),a=e.find(".chat_user_id").val(),i=e.find(".chat_text").val();""!=i&&(e.find(".icon-spin").show(),commonAjax("/my_messages/"+a+"/chat/",{function:"get_block",block_id:"list_messages_messages_list",mode:"async",reply_to_user_id:a,message:i,action:"send"},function(t){$(t).find("success")&&refresh_chat(),e.find(".icon-spin").hide()},"post"))});var getCookie=function(t){return document.cookie.length>0&&(start=document.cookie.indexOf(t+"="),-1!==start)?(start=start+t.length+1,end=document.cookie.indexOf(";",start),-1===end&&(end=document.cookie.length),unescape(document.cookie.substring(start,end))):""},setCookie=function(t,e,a){var i=5,n=new Date,o=parseInt(n.getHours());a=n.getHours()+a,n.setHours(a);var s=new Date,l=window.location.host.split(".");l.length>2&&l.shift(),l="."+l.join("."),o>i&&s.setDate(s.getDate()+1),s.setHours(i),s.setMinutes(0),s.setSeconds(0),n>s&&(n=s),document.cookie=t+"="+escape(e)+(null===a?"":";expires="+n.toGMTString()+";path=/;domain="+l)};if($(".show-all-comments").on("click",function(){$(this).hide(),$(".comment-item.g_hidden").removeClass("g_hidden")}),$(".share_place").each(function(){var t=$(this).data("url")||window.location.href,e=$(this).data("title")||$("title").text(),a=$(this).data("description")||$("meta[name=description]").attr("content"),i=$(this).data("media")||$("meta[itemprop=thumbnailUrl]").attr("content")||!1;$(this).html(get_sharing_html(t,e,a,i))}),$(".list_albums.masonry").length>0){var s=document.createElement("script");s.async=!0,s.src="/js/vendor/masonry.min.js",$("head").append(s)}if($(window).load(function(){"function"==typeof $().masonry&&$(".list_albums.masonry").masonry()}),$(".change_quality").length>0){var current_time=0;$(".change_quality .qualities span").on("click",function(){if(player_obj._player.src!=$(this).data("url"))return player_obj._player.currentTime&&(current_time=player_obj._player.currentTime),player_obj._player.src=$(this).data("url"),player_obj._player.load(),$(player_obj._player).on("loadedmetadata",function(){current_time>0&&(player_obj._player.currentTime=current_time,player_obj._player.play())}),$(".change_quality .current_q").text($(this).data("text")),$(".change_quality .open_q.active").trigger("click"),setCookie("video_quality",$(this).data("text"),744),!1}),getCookie("video_quality")?$('.change_quality [data-text="'+getCookie("video_quality")+'"]').trigger("click"):$('.change_quality [data-text="240p"]').trigger("click")}if($(".lang_formats a").on("click",function(){return setCookie("platform","mobile",24),!0}),$("[data-infinite-scroll]").length>0){var infinite_scroll_fire=function(t,e){infinite_loader.fadeIn();var a=t.data("infinite-from")?t.data("infinite-from"):"from";commonAjax("?mode=async&function=get_block&block_id="+t.data("infinite-scroll")+"&"+a+"="+t.data("infinite-page")+"&"+t.data("infinite-params"),{},function(a){var i=$(a).find("li,.item,.item-time");e.hasClass("masonry")?e.append(i).masonry("appended",i):e.append(i),t.data("infinite-page",parseInt(t.data("infinite-page"))+1),infinite_loader.fadeOut(),parseInt(t.data("infinite-page"))>parseInt(t.data("infinite-maxpage"))&&t.remove()},"post",function(e){t.remove(),infinite_loader.fadeOut()})},infinite_loader,infinite_scroll=function(){$("body").append('<div class="infinite-scroll-loader"> Loading...</div>'),infinite_loader=$(".infinite-scroll-loader"),$(window).scroll(function(){var t=$(".load-more-pagi:visible");if(t.length>0&&!t.hasClass("no-scroll")){var e=$(t.data("infinite-selector"));t.offset().top+200<$(window).scrollTop()+$(window).height()&&!infinite_loader.is(":visible")&&infinite_scroll_fire(t,e)}}),$(".load-more-pagi").on("click",function(){infinite_scroll_fire($(this),$($(this).data("infinite-selector")))})};infinite_scroll()}